# 📝 更新日志

本文件记录项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [Unreleased]

### 新增 ✨
- 🎯 **两阶段收集流程**: 链接收集阶段 + 统一解析阶段，提升效率和可靠性
- 🔄 **双重保存机制**: 同时保存到日期文件夹和根目录
- 🛡️ **增强错误处理**: 重试机制、详细错误分类和用户友好的错误信息
- 🎨 **智能日志格式**: 简化的URL显示和分类明确的错误提示
- 🔍 **HTML过滤**: 自动过滤掉.htm/.html文章页面，只解析真正的订阅文件
- 🌐 **User-Agent优化**: 为订阅解析器添加合适的请求头，解决403错误
- 🧹 **URL清理**: 自动清理HTML标签中的URL链接

### 改进 🔧
- ⚡ **收集速度提升**: 优化后的两阶段流程减少等待时间
- 📊 **日志可读性**: 更清晰的进度显示和错误报告
- 🐛 **Bug修复**: 修复URL解析、HTML过滤和网络请求等问题
- 📝 **文档更新**: 更新需求文档和工作流程描述

### 计划中
- [ ] 添加更多免费节点源
- [ ] 优化节点测速速度
- [ ] 添加节点质量评分系统
- [ ] 支持Docker部署
- [ ] 添加Web UI界面

---

## [2.0.0] - 2026-01-16

### 新增 ✨
- 🎯 **插件化架构重构**: 实现零代码添加新网站
- 📊 **多源并发收集**: 同时从14个网站收集节点
- 🔄 **自动去重重命名**: 节点智能去重和序号重命名
- 📁 **分离存储架构**: 每个网站生成独立信息文件
- 🚀 **GitHub Actions**: 每日自动收集和更新
- 📈 **性能监控**: 详细的统计信息和日志

### 改进 🔧
- ⚡ **收集速度提升**: 从10分钟优化到4分钟
- 🛡️ **错误处理增强**: 更完善的异常处理和重试机制
- 🌐 **网络优化**: 支持代理和自动回退
- 📝 **文档完善**: 添加详细的架构和使用文档
- 🧩 **配置优化**: 更灵活的配置选项

### 修复 🐛
- 🐛 **修复订阅链接检测**: 修复Base64编码订阅链接识别问题
- 🐛 **修复网站信息文件**: 确保所有网站正确生成信息文件
- 🐛 **修复节点汇总**: 修复节点汇总到nodetotal.txt的问题
- 🐛 **修复GitHub提交**: 修复自动提交到GitHub的问题

### 弃用
- ⚠️ **弃用旧版主程序**: `src/main.py` 改为使用 `run.py`
- ⚠️ **弃用独立脚本**: 合并到统一的CLI运行器

### 移除
- 🗑️ **移除过时代码**: 清理重复和过时的收集器实现
- 🗑️ **移除无用文件**: 删除废弃的配置和脚本文件

---

## [1.1.0] - 2026-01-10

### 新增 ✨
- ➕ **新增85LA收集器**: 支持从85LA收集节点
- ➕ **新增OpenProxyList收集器**: 支持OpenProxyList节点源
- 📊 **添加统计功能**: 显示收集节点数量和成功率

### 改进 🔧
- ⚡ **优化收集速度**: 减少请求超时时间
- 🛡️ **增强错误处理**: 添加更详细的错误日志

### 修复 🐛
- 🐛 **修复ClashNodeCC收集器**: 修复解析错误
- 🐛 **修复米贝节点收集器**: 修复订阅链接提取问题

---

## [1.0.0] - 2026-01-01

### 新增 ✨
- 🎉 **项目初始发布**
- 🌐 **支持13个免费节点源**
- 📦 **基本的节点收集功能**
- 🧪 **TCP连通性测试**
- 🔄 **自动提交到GitHub**

### 支持的网站
- FreeClashNode
- 米贝节点 (mibei77)
- ClashNodeV2Ray
- ProxyQueen
- 玩转迷 (wanzhuanmi)
- CFMem
- ClashNodeCC
- Datiya
- Telegeam
- ClashGithub
- OneClash
- FreeV2rayNode
- 85LA

---

## 版本说明

### 版本号规则
- **主版本号 (MAJOR)**: 不兼容的API变更
- **次版本号 (MINOR)**: 向下兼容的功能性新增
- **修订号 (PATCH)**: 向下兼容的问题修正

### 变更类型
- **新增 ✨**: 新功能
- **改进 🔧**: 现有功能的改进
- **修复 🐛**: Bug修复
- **弃用 ⚠️**: 即将移除的功能
- **移除 🗑️**: 已移除的功能
- **安全 🔒**: 安全相关的改进

---

## 链接

- [最新版本](https://github.com/yafeisun/v2raynode/releases/latest)
- [发布历史](https://github.com/yafeisun/v2raynode/releases)
- [问题反馈](https://github.com/yafeisun/v2raynode/issues)
